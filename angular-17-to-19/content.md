# å€‹äººåˆ¶ä½œã‚µã‚¤ãƒˆã‚’ Angular 17â†’19 ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸè¨˜éŒ²

æ›´æ–°ãŒé…ã‚Œã¦ã—ã¾ã„ã€ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ï¼
ã“ã¡ã‚‰ã¯ [Angular Advent Calendar 2024](https://qiita.com/advent-calendar/2024/angular) ã® 14 æ—¥ç›®ã®è¨˜äº‹ã¨ãªã‚Šã¾ã™ã€‚
13 æ—¥ç›®ã®è¨˜äº‹ã¯ [rysiva](https://qiita.com/rysiva) ã•ã‚“ãŒæŠ•ç¨¿ã•ã‚Œã¾ã—ãŸã®ã§ã€ã‚ã‚ã›ã¦ã”è¦§ãã ã•ã„ã€‚

æ—¥ã€…ã®æ¥­å‹™ã§ã‚‚ Angular ã‚’æ´»ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€ã“ã® 1 å¹´é–“ã®æŒ¯ã‚Šè¿”ã‚Šã¨ã—ã¦å…±æœ‰ã§ãã‚‹ãƒˆãƒ”ãƒƒã‚¯ã‚’è€ƒãˆã¦ã„ã¾ã—ãŸã€‚ãã®ä¸­ã§ã€å€‹äººåˆ¶ä½œã®ã‚µã‚¤ãƒˆãŒãšã£ã¨ Angular 17 ã®ã¾ã¾æ­¢ã¾ã£ã¦ã„ã‚‹ã“ã¨ãŒæ°—ã«ãªã‚Šã€ä»Šå›ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’è¡Œã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚æœ¬è¨˜äº‹ã§ã¯ã€ãã®æ›´æ–°å†…å®¹ã¨ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚

## ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸã‚µã‚¤ãƒˆ

ä»Šå›ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸã®ã¯ã€å€‹äººã§åˆ¶ä½œã—ã¦ã„ã‚‹ [ã‚¢ã‚¹ã‚­ãƒ¼ã‚¢ãƒ¼ãƒˆé–²è¦§ã‚µã‚¤ãƒˆ](https://aahub.org/) ã§ã™ã€‚
ã“ã®ã‚µã‚¤ãƒˆã¯ Ionic ã¨ Angular ã‚’ç”¨ã„ã¦æ§‹ç¯‰ã—ã¦ã„ã¾ã™ã€‚æ˜¨å¹´ã®ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ã‚‚å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ãªã©ã‚’è¡Œã„ã¾ã—ãŸãŒã€ãã®å¾Œã—ã°ã‚‰ãæ‰‹ã‚’ã¤ã‘ã¦ã„ãªã‹ã£ãŸãŸã‚ã€ä»Šå›ã®é¡Œæã«ã¯ã†ã£ã¦ã¤ã‘ã¨è€ƒãˆã¾ã—ãŸã€‚
ä»Šå¹´ã¯ã€ã“ã®ã‚µã‚¤ãƒˆã‚’æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¸ã¨ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹æ‰‹é †ã‚„ãƒã‚¤ãƒ³ãƒˆã‚’ã¾ã¨ã‚ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

## ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå¾Œã®å¤‰åŒ–

ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã®å¤‰æ›´ã«ã‚ˆã‚Šã€ãƒ“ãƒ«ãƒ‰é€Ÿåº¦ãŒæ”¹å–„ã—ã¾ã—ãŸï¼ˆç´„ 1 åˆ† 30 ç§’ â†’ ç´„ 55 ç§’ï¼‰ã€‚
PageSpeed Insights ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¨ˆæ¸¬ã—ã¦ã¿ã¾ã—ãŸãŒã€ç‰¹ã«æ”¹å–„ã¯è¦‹ã‚‰ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚

ã§ãã‚Œã° SSRï¼ˆServer-Side Renderingï¼‰ã«ã‚‚æŒ‘æˆ¦ã—ã¦ã¿ãŸã‹ã£ãŸã®ã§ã™ãŒã€é€”ä¸­ã§ãƒãƒã£ã¦ã—ã¾ã„ã€ä»Šå›ã®è¨˜äº‹ã«ã¯é–“ã«åˆã„ã¾ã›ã‚“ã§ã—ãŸã€‚ã‚‚ã—ä»Šå¾Œ SSR ã‚’å°å…¥ã§ãã€å¤‰åŒ–ãŒã‚ã‚Œã°è¿½è¨˜ã™ã‚‹äºˆå®šã§ã™ã€‚

## ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå‰å¾Œã® package.json

ä»Šå›ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ã¯ã€`wrangler` ãªã©ã®å¤ã„ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚ã¾ã¨ã‚ã¦æ›´æ–°ã‚’è¡Œã„ã¾ã—ãŸã€‚
ä»¥ä¸‹ã¯ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå‰å¾Œã® `package.json` ã§ã™ã€‚

<details><summary>å¤‰æ›´å‰</summary>

```json
{
  "dependencies": {
    "@angular/animations": "^17.3.7",
    "@angular/common": "^17.3.7",
    "@angular/core": "^17.3.7",
    "@angular/forms": "^17.3.7",
    "@angular/platform-browser": "^17.3.7",
    "@angular/platform-browser-dynamic": "^17.3.7",
    "@angular/router": "^17.3.7",
    "@cloudflare/d1": "^1.4.1",
    "@ionic/angular": "^8.0.0-rc.2",
    "@prisma/adapter-d1": "^5.13.0",
    "@prisma/client": "^5.13.0",
    "dom-to-image-more-sjis-art": "^2.8.4",
    "encoding-japanese": "^1.0.30",
    "file-saver": "^2.0.2",
    "firebase": "^10.7.0",
    "hono": "^4.2.8",
    "ionicons": "^7.2.1",
    "rxjs": "^7.8.0",
    "ts-md5": "^1.3.1",
    "tslib": "^2.3.0",
    "zone.js": "~0.14.2"
  },
  "devDependencies": {
    "@angular-devkit/build-angular": "^17.3.6",
    "@angular-eslint/builder": "17.3.0",
    "@angular-eslint/eslint-plugin": "17.3.0",
    "@angular-eslint/eslint-plugin-template": "17.3.0",
    "@angular-eslint/schematics": "17.3.0",
    "@angular-eslint/template-parser": "17.3.0",
    "@angular/cli": "^17.3.6",
    "@angular/compiler-cli": "^17.3.7",
    "@angular/language-service": "^17.3.7",
    "@chromatic-com/storybook": "^1.2.25",
    "@cloudflare/kv-asset-handler": "^0.3.0",
    "@cloudflare/workers-types": "^4.20231121.0",
    "@compodoc/compodoc": "^1.1.23",
    "@ionic/angular-toolkit": "^9.0.0",
    "@miniflare/tre": "^3.0.0-next.13",
    "@rdlabo/eslint-plugin-rules": "^0.1.1",
    "@storybook/addon-docs": "^8.0.4",
    "@storybook/addon-essentials": "^8.0.4",
    "@storybook/addon-interactions": "^8.0.4",
    "@storybook/addon-links": "^8.0.4",
    "@storybook/angular": "^8.0.4",
    "@storybook/blocks": "^8.0.4",
    "@storybook/test": "^8.0.4",
    "@testing-library/angular": "^16.0.0",
    "@testing-library/user-event": "^14.5.2",
    "@types/jasmine": "~5.1.0",
    "@types/prettier": "^2.7.2",
    "@typescript-eslint/eslint-plugin": "^7.2.0",
    "@typescript-eslint/parser": "^7.2.0",
    "eslint": "^8.57.0",
    "eslint-config-prettier": "^9.1.0",
    "eslint-formatter-summary": "^1.1.0",
    "eslint-plugin-import": "2.29.1",
    "eslint-plugin-jsdoc": "48.0.4",
    "eslint-plugin-prefer-arrow": "1.2.2",
    "eslint-plugin-prettier": "^5.1.3",
    "eslint-plugin-storybook": "^0.6.12",
    "eslint-todo-generator": "^0.1.0",
    "jasmine-core": "~5.1.0",
    "jasmine-spec-reporter": "~5.0.0",
    "karma": "~6.4.0",
    "karma-chrome-launcher": "~3.2.0",
    "karma-coverage": "~2.2.0",
    "karma-coverage-istanbul-reporter": "~3.0.2",
    "karma-jasmine": "~5.1.0",
    "karma-jasmine-html-reporter": "^2.1.0",
    "prettier": "^3.2.4",
    "prettier-eslint": "^15.0.1",
    "prisma": "^5.13.0",
    "protractor": "~7.0.0",
    "source-map-explorer": "^2.5.3",
    "storybook": "^8.0.4",
    "stylelint": "^16.2.0",
    "stylelint-config-standard": "^36.0.0",
    "stylelint-config-standard-scss": "^13.0.0",
    "stylelint-prettier": "^5.0.0",
    "stylelint-scss": "^6.1.0",
    "tailwindcss": "^3.3.2",
    "ts-node": "~8.3.0",
    "typescript": "~5.2.2",
    "wrangler": "^0.0.0-04a2d0ed"
  },
  "description": "An Ionic project"
}
```

</details>

<details><summary>å¤‰æ›´å¾Œ</summary>

```json
{
  "dependencies": {
    "@angular/animations": "^19.0.4",
    "@angular/common": "^19.0.4",
    "@angular/core": "^19.0.4",
    "@angular/forms": "^19.0.4",
    "@angular/platform-browser": "^19.0.4",
    "@angular/platform-browser-dynamic": "^19.0.4",
    "@angular/router": "^19.0.4",
    "@angular/service-worker": "^19.0.4",
    "@cloudflare/d1": "^1.4.1",
    "@ionic/angular": "^8.0.0-rc.2",
    "@prisma/adapter-d1": "^5.13.0",
    "@prisma/client": "^5.13.0",
    "dom-to-image-more-sjis-art": "^2.8.4",
    "encoding-japanese": "^1.0.30",
    "file-saver": "^2.0.2",
    "firebase": "^10.7.0",
    "hono": "^4.2.8",
    "ionicons": "^7.2.1",
    "rxjs": "^7.8.0",
    "ts-md5": "^1.3.1",
    "tslib": "^2.3.0",
    "zone.js": "~0.15.0"
  },
  "devDependencies": {
    "@angular-devkit/build-angular": "^19.0.5",
    "@angular-eslint/builder": "19.0.2",
    "@angular-eslint/eslint-plugin": "19.0.2",
    "@angular-eslint/eslint-plugin-template": "19.0.2",
    "@angular-eslint/schematics": "19.0.2",
    "@angular-eslint/template-parser": "19.0.2",
    "@angular/cli": "^19.0.5",
    "@angular/compiler-cli": "^19.0.4",
    "@angular/language-service": "^19.0.4",
    "@chromatic-com/storybook": "^1.2.25",
    "@cloudflare/kv-asset-handler": "^0.3.0",
    "@cloudflare/workers-types": "^4.20231121.0",
    "@compodoc/compodoc": "^1.1.23",
    "@ionic/angular-toolkit": "^9.0.0",
    "@miniflare/tre": "^3.0.0-next.13",
    "@rdlabo/eslint-plugin-rules": "^0.1.1",
    "@storybook/addon-docs": "^8.4.7",
    "@storybook/addon-essentials": "^8.4.7",
    "@storybook/addon-interactions": "^8.4.7",
    "@storybook/addon-links": "^8.4.7",
    "@storybook/angular": "^8.4.7",
    "@storybook/blocks": "^8.4.7",
    "@storybook/test": "^8.4.7",
    "@testing-library/angular": "^17.3.4",
    "@testing-library/dom": "^10.0.0",
    "@testing-library/user-event": "^14.5.2",
    "@types/jasmine": "~5.1.0",
    "@types/prettier": "^2.7.2",
    "@typescript-eslint/eslint-plugin": "^7.2.0",
    "@typescript-eslint/parser": "^7.2.0",
    "eslint": "^8.57.0",
    "eslint-config-prettier": "^9.1.0",
    "eslint-formatter-summary": "^1.1.0",
    "eslint-plugin-import": "2.29.1",
    "eslint-plugin-jsdoc": "48.0.4",
    "eslint-plugin-prefer-arrow": "1.2.2",
    "eslint-plugin-prettier": "^5.1.3",
    "eslint-plugin-storybook": "^0.6.12",
    "eslint-todo-generator": "^0.1.0",
    "jasmine-core": "~5.1.0",
    "jasmine-spec-reporter": "~5.0.0",
    "karma": "~6.4.0",
    "karma-chrome-launcher": "~3.2.0",
    "karma-coverage": "~2.2.0",
    "karma-coverage-istanbul-reporter": "~3.0.2",
    "karma-jasmine": "~5.1.0",
    "karma-jasmine-html-reporter": "^2.1.0",
    "prettier": "^3.2.4",
    "prettier-eslint": "^15.0.1",
    "prisma": "^5.13.0",
    "source-map-explorer": "^2.5.3",
    "storybook": "^8.4.7",
    "stylelint": "^16.2.0",
    "stylelint-config-standard": "^36.0.0",
    "stylelint-config-standard-scss": "^13.0.0",
    "stylelint-prettier": "^5.0.0",
    "stylelint-scss": "^6.1.0",
    "tailwindcss": "^3.3.2",
    "ts-node": "~8.3.0",
    "typescript": "~5.5.4",
    "wrangler": "^3.95.0"
  },
  "description": "An Ionic project"
}
```

</details>

## ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ã‚„ã£ãŸã“ã¨

ä»Šå›ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§è¡Œã£ãŸä¸»ãªä½œæ¥­ã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

- Angular 17 â†’ 18 ã¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
- Angular 18 â†’ 19 ã¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
- ä¸è¦ãª import æ–‡ã®å‰Šé™¤
- signal åŒ–å¯¾å¿œ
- Cloudflare Pages ã¸ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

## 17â†’18 ã¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

ãŠãªã˜ã¿ã® ng update ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€è¨€ã‚ã‚ŒãŸé€šã‚Šã« update ã—ã¦ã„ãã¾ã™ã€‚
ã¾ãšã¯ã€17 ã‹ã‚‰ 18 ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ã„ãã¾ã™ã€‚

<details><summary>ng update</summary>

```shell
% ng update
Using package manager: npm
Collecting installed dependencies...
Found 82 dependencies.
    We analyzed your package.json, there are some packages to update:

      Name                                    Version                  Command to update
     -------------------------------------------------------------------------------------
      @angular-eslint/schematics              17.3.0 -> 19.0.2         ng update @angular-eslint/schematics
      @angular/cli                            17.3.6 -> 18.2.9         ng update @angular/cli@18
      @angular/core                           17.3.7 -> 18.2.9         ng update @angular/core@18
      @testing-library/angular                16.0.0 -> 17.3.4         ng update @testing-library/angular

    There might be additional packages which don't provide 'ng update' capabilities that are outdated.
    You can update the additional packages by running the update command of your package manager.

```

</details>

åŸºæœ¬çš„ã« ng update ã§æç¤ºã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã¦ã‚‚ãªã‚“ã‚‰ã‹ã®ä¾å­˜é–¢ä¿‚ã®ã‚¨ãƒ©ãƒ¼ã¯ã§ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚
ä»Šå›ã¯@storybook/angular ã§ã‚¨ãƒ©ãƒ¼ãŒã§ãŸã®ã§ã€å€‹åˆ¥ã«æœ€æ–°ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¾ã—ãŸ

```shell
npm i storybook@8.4.7 --save-dev
```

ã‚¨ãƒ©ãƒ¼ã‚’è§£æ±ºã—ã€ng udpate ãŒå®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§å†åº¦å®Ÿè¡Œã—ã¾ã™ã€‚
`ng update @angular/cli@18 @angular/core@18`å®Ÿè¡Œã®é€”ä¸­ã§ migration å‘¨ã‚Šã‚’ç¢ºèªã•ã‚Œã‚‹ã®ã§å–ã‚Šåˆãˆãšã‚¤ã‚¨ã‚¹ã€‚

## 17â†’18 ã¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

ã“ã“ã‹ã‚‰ã¯ã€`ng update` ã‚³ãƒãƒ³ãƒ‰ã‚’ç”¨ã„ã¦ Angular ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ 17 ã‹ã‚‰ 18 ã¸å¼•ãä¸Šã’ã¦ã„ãã¾ã™ã€‚

ã¾ãšã€`ng update` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

<details><summary>ng update</summary>

```shell
% ng update
Using package manager: npm
Collecting installed dependencies...
Found 82 dependencies.
    We analyzed your package.json, there are some packages to update:

      Name                                    Version                  Command to update
     -------------------------------------------------------------------------------------
      @angular-eslint/schematics              17.3.0 -> 19.0.2         ng update @angular-eslint/schematics
      @angular/cli                            17.3.6 -> 18.2.9         ng update @angular/cli@18
      @angular/core                           17.3.7 -> 18.2.9         ng update @angular/core@18
      @testing-library/angular                16.0.0 -> 17.3.4         ng update @testing-library/angular

    There might be additional packages which don't provide 'ng update' capabilities that are outdated.
    You can update the additional packages by running the update command of your package manager.
```

</details>

ã“ã“ã§ã€ng update ã‹ã‚‰ææ¡ˆã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ã‚’é †ç•ªã«å®Ÿè¡Œã—ã¦ã„ãã¾ã™ãŒã€ã—ã°ã—ã°ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚
ä»Šå›ã¯ @storybook/angular ã«èµ·å› ã™ã‚‹ã‚¨ãƒ©ãƒ¼ãŒã‚ã£ãŸãŸã‚ã€è©²å½“ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ‰‹å‹•ã§æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æ›´æ–°ã—ã¾ã—ãŸã€‚

```shell
npm i storybook@8.4.7 --save-dev
```

ã“ã®ã‚¨ãƒ©ãƒ¼è§£æ¶ˆå¾Œã€ng update ã‚³ãƒãƒ³ãƒ‰ãŒæ­£å¸¸ã«å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã€æ”¹ã‚ã¦ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```shell
ng update @angular/cli@18 @angular/core@18
```

å®Ÿè¡Œä¸­ã«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«é–¢ã™ã‚‹ç¢ºèªãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™ãŒã€ä»Šå›ã®å ´åˆã¯ç‰¹ã« migration ã«ã‚ˆã‚‹å¤‰æ›´ã¯ãªã„ã‚ˆã†ã§ã—ãŸã€‚

<details><summary>ng update @angular/cli@18 @angular/core@18</summary>

```shell
% ng update @angular/cli@18 @angular/core@18
The installed Angular CLI version is outdated.
Installing a temporary Angular CLI versioned 18.2.12 to perform the update.
âœ” Packages successfully installed.
Using package manager: npm
Collecting installed dependencies...
Found 82 dependencies.
Fetching dependency metadata from registry...
                  Package "@angular/compiler-cli" has a missing peer dependency of "@angular/compiler" @ "18.2.13".
                  Package "@angular/platform-browser-dynamic" has a missing peer dependency of "@angular/compiler" @ "18.2.13".
    Updating package.json with dependency @angular-devkit/build-angular @ "18.2.12" (was "17.3.6")...
    Updating package.json with dependency @angular/cli @ "18.2.12" (was "17.3.6")...
    Updating package.json with dependency @angular/compiler-cli @ "18.2.13" (was "17.3.7")...
    Updating package.json with dependency @angular/language-service @ "18.2.13" (was "17.3.7")...
    Updating package.json with dependency typescript @ "5.5.4" (was "5.2.2")...
    Updating package.json with dependency @angular/animations @ "18.2.13" (was "17.3.7")...
    Updating package.json with dependency @angular/common @ "18.2.13" (was "17.3.7")...
    Updating package.json with dependency @angular/core @ "18.2.13" (was "17.3.7")...
    Updating package.json with dependency @angular/forms @ "18.2.13" (was "17.3.7")...
    Updating package.json with dependency @angular/platform-browser @ "18.2.13" (was "17.3.7")...
    Updating package.json with dependency @angular/platform-browser-dynamic @ "18.2.13" (was "17.3.7")...
    Updating package.json with dependency @angular/router @ "18.2.13" (was "17.3.7")...
    Updating package.json with dependency zone.js @ "0.14.10" (was "0.14.4")...
UPDATE package.json (3826 bytes)
âœ” Cleaning node modules directory
âœ” Installing packages
** Optional migrations of package '@angular/cli' **

This package has 1 optional migration that can be executed.
Optional migrations may be skipped and executed after the update process, if preferred.

 Select the migrations that you'd like to run

** Executing migrations of package '@angular/core' **

â¯ Updates two-way bindings that have an invalid expression to use the longform expression instead.
  Migration completed (No changes made).

â¯ Replace deprecated HTTP related modules with provider functions.
UPDATE src/app/services/worker-api.ts (4427 bytes)
  Migration completed (1 file modified).

â¯ Updates calls to afterRender with an explicit phase to the new API.
  Migration completed (No changes made).

```

</details>

## 18â†’19 ã¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

Angular 18 ã¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒå®Œäº†ã—ãŸã‚‰ã€åŒæ§˜ã« `ng update` ã‚³ãƒãƒ³ãƒ‰ã§ 19 ã¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’é€²ã‚ã¾ã™ã€‚

<details><summary>ng update</summary>

```shell
% ng update
Using package manager: npm
Collecting installed dependencies...
Found 82 dependencies.
    We analyzed your package.json, there are some packages to update:

      Name                                    Version                  Command to update
     -------------------------------------------------------------------------------------
      @angular-eslint/schematics              18.4.3 -> 19.0.2         ng update @angular-eslint/schematics
      @angular/cli                            18.2.12 -> 19.0.5        ng update @angular/cli
      @angular/core                           18.2.13 -> 19.0.4        ng update @angular/core
      @testing-library/angular                16.0.0 -> 17.3.4         ng update @testing-library/angular

    There might be additional packages which don't provide 'ng update' capabilities that are outdated.
    You can update the additional packages by running the update command of your package manager.
```

</details>

ã“ã“ã§ã‚‚ã€ng update ãŒææ¡ˆã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã„ãã¾ã™ã€‚
é€”ä¸­ã§ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã®å¤‰æ›´ã‚„ standalone ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã™ã‚‹ã‹ã©ã†ã‹ã¨ã„ã£ãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦å°‹ã­ã‚‰ã‚Œã¾ã™ãŒã€ä»Šå›ã¯ã€ŒYesã€ã‚’é¸æŠã—ã¾ã—ãŸã€‚ãã®çµæœã€è‡ªå‹•çš„ã« standalone: true ãŒå‰Šé™¤ã•ã‚Œã€standalone ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã¨ã—ã¦é©ç”¨ã•ã‚Œã¾ã—ãŸã€‚

<details><summary>ng update @angular/cli @angular/core</summary>

```shell
% ng update @angular/cli @angular/core
The installed Angular CLI version is outdated.
Installing a temporary Angular CLI versioned 19.0.5 to perform the update.
Using package manager: npm
Collecting installed dependencies...
Found 83 dependencies.
Fetching dependency metadata from registry...
                  Package "@angular/compiler-cli" has a missing peer dependency of "@angular/compiler" @ "19.0.4".
                  Package "@angular/platform-browser-dynamic" has a missing peer dependency of "@angular/compiler" @ "19.0.4".
    Updating package.json with dependency @angular-devkit/build-angular @ "19.0.5" (was "18.2.12")...
    Updating package.json with dependency @angular/cli @ "19.0.5" (was "18.2.12")...
    Updating package.json with dependency @angular/compiler-cli @ "19.0.4" (was "18.2.13")...
    Updating package.json with dependency @angular/language-service @ "19.0.4" (was "18.2.13")...
    Updating package.json with dependency @angular/animations @ "19.0.4" (was "18.2.13")...
    Updating package.json with dependency @angular/common @ "19.0.4" (was "18.2.13")...
    Updating package.json with dependency @angular/core @ "19.0.4" (was "18.2.13")...
    Updating package.json with dependency @angular/forms @ "19.0.4" (was "18.2.13")...
    Updating package.json with dependency @angular/platform-browser @ "19.0.4" (was "18.2.13")...
    Updating package.json with dependency @angular/platform-browser-dynamic @ "19.0.4" (was "18.2.13")...
    Updating package.json with dependency @angular/router @ "19.0.4" (was "18.2.13")...
    Updating package.json with dependency zone.js @ "0.15.0" (was "0.14.10")...
UPDATE package.json (3853 bytes)
âœ” Cleaning node modules directory
âœ” Installing packages
** Executing migrations of package '@angular/cli' **

â¯ Update '@angular/ssr' import paths to use the new '/node' entry point when 'CommonEngine' is detected.
  Migration completed (No changes made).

â¯ Update the workspace configuration by replacing deprecated options in 'angular.json' for compatibility with the latest Angular CLI changes.
  Migration completed (No changes made).

** Optional migrations of package '@angular/cli' **

This package has 1 optional migration that can be executed.
Optional migrations may be skipped and executed after the update process, if preferred.

 Select the migrations that you'd like to run [use-application-builder] Migrate application projects to the new build system.
(https://angular.dev/tools/cli/build-system-migration)

â¯ Migrate application projects to the new build system.
  Application projects that are using the '@angular-devkit/build-angular' package's 'browser' and/or 'browser-esbuild' builders will be migrated to use the new 'application' builder.
  You can read more about this, including known issues and limitations, here: https://angular.dev/tools/cli/build-system-migration
    The output location of the browser build has been updated from "www" to "www/browser". You might need to adjust your deployment pipeline or, as an alternative, set outputPath.browser to "" in order to maintain the previous functionality.
    The output location of the browser build has been updated from "dist" to "dist/browser". You might need to adjust your deployment pipeline or, as an alternative, set outputPath.browser to "" in order to maintain the previous functionality.
UPDATE angular.json (6042 bytes)
UPDATE tsconfig.json (996 bytes)
  Migration completed (2 files modified).

** Executing migrations of package '@angular/core' **

â¯ Updates non-standalone Directives, Component and Pipes to 'standalone:false' and removes 'standalone:true' from those who are standalone.
UPDATE src/app/pages/list/changelog/changelog.page.ts (1910 bytes)
UPDATE src/app/pages/login-modal/login-modal.page.ts (1630 bytes)
UPDATE src/app/components/search-result-list/search-result-list.component.ts (3280 bytes)
UPDATE src/app/pages/list/list.page.ts (9412 bytes)
UPDATE src/app/components/aahub-footer/aahub-footer.component.ts (828 bytes)
UPDATE src/app/components/aahub-logo/aahub-logo.component.ts (294 bytes)
UPDATE src/app/app.component.ts (2765 bytes)
UPDATE src/app/pages/editor/upload-mlt/upload-mlt.page.ts (5832 bytes)
UPDATE src/app/pages/view-popover/view-popover.page.ts (3533 bytes)
UPDATE src/app/pages/home/components/dashboard/dashboard.component.ts (2479 bytes)
UPDATE src/app/pages/home/components/aahub-navbar/aahub-navbar.component.ts (2858 bytes)
UPDATE src/app/pages/lightbox/lightbox.page.ts (5620 bytes)
UPDATE src/app/components/aa-text-control-panel/aa-text-control-panel.component.ts (1051 bytes)
UPDATE src/app/components/mlt-tag-header/mlt-tag-header.component.ts (712 bytes)
UPDATE src/app/components/aa-text/aa-text.component.ts (384 bytes)
UPDATE src/app/components/mlt-viewer/mlt-viewer.component.ts (7818 bytes)
UPDATE src/app/pages/home/components/mlt-list/components/mlt-list-item/mlt-list-item.component.ts (1653 bytes)
UPDATE src/app/pages/home/components/mlt-list/mlt-list.component.ts (960 bytes)
UPDATE src/app/pages/home/components/top/top.component.ts (4382 bytes)
UPDATE src/app/components/toggle-dark-mode-button/toggle-dark-mode-button.component.ts (943 bytes)
UPDATE src/app/pages/home/home.page.ts (13741 bytes)
UPDATE src/app/pages/search/search.page.ts (4950 bytes)
UPDATE src/app/pages/editor/editor.page.ts (8759 bytes)
UPDATE src/app/pages/mypage/mypage.page.ts (3530 bytes)
  Migration completed (24 files modified).

â¯ Updates ExperimentalPendingTasks to PendingTasks.
  Migration completed (No changes made).

** Optional migrations of package '@angular/core' **

This package has 1 optional migration that can be executed.
Optional migrations may be skipped and executed after the update process, if preferred.

 Select the migrations that you'd like to run
```

</details>

ã¾ãŸã€`angular.json` ã‚‚ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã®å¤‰æ›´ã«åˆã‚ã›ã¦è‡ªå‹•ã§æ›¸ãæ›ãˆã‚‰ã‚Œã¾ã—ãŸã€‚
ã“ã®ã‚ãŸã‚Šã¯è‡ªåˆ†ãŒã¾ã ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã§ãã¦ã„ãªã„éƒ¨åˆ†ã ã£ãŸã®ã§ã€migration ã®ã‚µãƒãƒ¼ãƒˆã¯æœ¬å½“ã«åŠ©ã‹ã‚Šã¾ã™ã€‚

![angular.jsonã®diff](./images/angular-json-diff.png)

## ä¸è¦ãª import æ–‡å‰Šé™¤

å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒå®Œäº†ã—ãŸã‚‰ã€`ionic serve` ã¾ãŸã¯ `ng serve` ã§ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã—ã¦ã¿ã¾ã™ã€‚
æ–°ã—ã„ Angular Compiler ã§ã¯ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ä½¿ç”¨ã—ã¦ã„ãªã„ä¸è¦ãª import ã‚’è­¦å‘Šã—ã¦ãã‚Œã‚‹ãŸã‚ã€ãã‚Œã‚‰ã‚’ã²ã¨ã¤ãšã¤å‰Šé™¤ã—ã¦ã„ãã¾ã—ãŸã€‚

ä¸è¦ãª import ãŒå¤šãã¦ã€ã‚„ã‚„ç”³ã—è¨³ãªã•ã‚’æ„Ÿã˜ã¤ã¤ã®ä½œæ¥­ã§ã—ãŸãŒã€ãã®ãŠã‹ã’ã§ã‚³ãƒ¼ãƒ‰ã¯ã‹ãªã‚Šã‚¹ãƒƒã‚­ãƒªã—ã¾ã—ãŸã€‚

<details><summary>[WARING] TS-998113: ...</summary>

```shell
[ng] â–² [WARNING] TS-998113: IonSplitPane is not used within the template of AppComponent [plugin angular-compiler]
[ng]     src/app/app.component.ts:37:8:
[ng]       37 â”‚         IonSplitPane,
[ng]          â•µ         ~~~~~~~~~~~~
[ng] â–² [WARNING] TS-998113: IonMenu is not used within the template of AppComponent [plugin angular-compiler]
[ng]     src/app/app.component.ts:38:8:
[ng]       38 â”‚         IonMenu,
[ng]          â•µ         ~~~~~~~
[ng] â–² [WARNING] TS-998113: IonNav is not used within the template of AppComponent [plugin angular-compiler]
[ng]     src/app/app.component.ts:39:8:
[ng]       39 â”‚         IonNav,
[ng]          â•µ         ~~~~~~
[ng] â–² [WARNING] TS-998113: IonRouterOutlet is not used within the template of AppComponent [plugin angular-compiler]
[ng]     src/app/app.component.ts:40:8:
[ng]       40 â”‚         IonRouterOutlet,
```

</details>

## Signal åŒ–

Signal ã«ã¤ã„ã¦ã¯ã¾ã ååˆ†ã«ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã§ãã¦ã„ãªã‹ã£ãŸã®ã§ã™ãŒã€æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‚’ signal ãƒ™ãƒ¼ã‚¹ã«æ›¸ãæ›ãˆã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã¨ã®ã“ã¨ã§ã€è©¦ã—ã«å®Ÿè¡Œã—ã¦ã¿ã¾ã—ãŸã€‚
ã“ã®ã‚³ãƒãƒ³ãƒ‰ã§ã¯ã€`@Input`ã€`@Output`ã€`@ViewChild`ã€`@ViewChildren` ãªã©ã‚’ signal ãƒ™ãƒ¼ã‚¹ã®æ›¸ãæ–¹ã«å¤‰æ›ã—ã¦ãã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚

<details><summary>ng generate @angular/core:signals</summary>

```shell
% ng generate @angular/core:signals
âœ” Which migrations do you want to run? Convert `@Input` to the signal-based `input`, Convert `@Output` to the new `output` function, Convert
`@ViewChild`/`@ViewChildren` and `@ContentChild`/`@ContentChildren` to the signal-based `viewChild`/`viewChildren` and `contentChild`/`contentChildren`
âœ” Which directory do you want to migrate? src
âœ” Do you want to migrate as much as possible, even if it may break your build? no
    Preparing analysis for: tsconfig.app.json..
    Preparing analysis for: tsconfig.spec.json..
    Scanning for inputs: tsconfig.app.json..
    Scanning for inputs: tsconfig.spec.json..

    Processing analysis data between targets..

    Migrating: tsconfig.app.json..
    Migrating: tsconfig.spec.json..
    Applying changes..

    Successfully migrated to signal inputs ğŸ‰
      -> Migrated 19/21 inputs.
    To see why 2 inputs couldn't be migrated
    consider re-running with "--insert-todos" or "--best-effort-mode".
    Preparing analysis for: tsconfig.app.json..
    Preparing analysis for: tsconfig.spec.json..
    Scanning for outputs: tsconfig.app.json..
    Scanning for outputs: tsconfig.spec.json..

    Processing analysis data between targets..

    Migrating: tsconfig.app.json..
    Migrating: tsconfig.spec.json..
    Applying changes..

    Successfully migrated to outputs as functions ğŸ‰
      -> Migrated 14 out of 14 detected outputs (100.00 %).
    Preparing analysis for: tsconfig.app.json..
    Preparing analysis for: tsconfig.spec.json..
    Scanning for queries: tsconfig.app.json..
    Scanning for queries: tsconfig.spec.json..

    Processing analysis data between targets..

    Migrating: tsconfig.app.json..
    Migrating: tsconfig.spec.json..
    Applying changes..

    Successfully migrated to signal queries ğŸ‰

    Successfully migrated to signal queries ğŸ‰
      -> Migrated 4/4 queries.
UPDATE src/app/components/search-result-list/search-result-list.component.ts (3119 bytes)
UPDATE src/app/pages/home/components/aahub-navbar/aahub-navbar.component.ts (2850 bytes)
UPDATE src/app/components/aa-text-control-panel/aa-text-control-panel.component.ts (993 bytes)
UPDATE src/app/components/mlt-viewer/mlt-viewer.component.ts (7811 bytes)
UPDATE src/app/pages/home/components/mlt-list/components/mlt-list-item/mlt-list-item.component.ts (1742 bytes)
UPDATE src/app/directives/elastic.directive.ts (888 bytes)
UPDATE src/app/components/mlt-tag-header/mlt-tag-header.component.ts (660 bytes)
UPDATE src/app/components/aa-text/aa-text.component.ts (299 bytes)
UPDATE src/app/pages/home/components/mlt-list/mlt-list.component.ts (883 bytes)
UPDATE src/app/components/search-result-list/search-result-list.component.html (835 bytes)
UPDATE src/app/pages/home/components/aahub-navbar/aahub-navbar.component.html (799 bytes)
UPDATE src/app/components/mlt-tag-header/mlt-tag-header.component.html (200 bytes)
UPDATE src/app/components/aa-text/aa-text.component.html (84 bytes)
UPDATE src/app/components/mlt-viewer/mlt-viewer.component.html (4269 bytes)
UPDATE src/app/pages/home/components/mlt-list/components/mlt-list-item/mlt-list-item.component.html (1428 bytes)
UPDATE src/app/pages/home/components/mlt-list/mlt-list.component.html (362 bytes)
UPDATE src/app/directives/drag-drop.directive.ts (1077 bytes)
UPDATE src/app/directives/pinch.directive.ts (1897 bytes)
UPDATE src/app/pages/home/components/top/top.component.ts (4148 bytes)
UPDATE src/app/pages/home/home.page.ts (13208 bytes)
UPDATE src/app/pages/editor/editor.page.ts (8654 bytes)
```

</details>

ã“ã“ã¾ã§å¤‰æ›ã‚’çµ‚ãˆã€ä¸€é€šã‚Šãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã‚¢ãƒ—ãƒªãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã—ãŸã€‚
ã‚ã¨ã¯ã€Cloudflare Pages ã¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚Œã°å®Œäº†ã§ã™ã€‚

## Cloudflare Pages ã¸ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

Cloudflare Pages ã¸ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§ã™ãŒã€Angular 19 ã¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ä¼´ã„ã€`esbuild` ã‚’ç”¨ã„ã‚‹ã‚ˆã†ãªãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã¸ã®å¤‰æ›´ãŒè¡Œã‚ã‚Œã€å‡ºåŠ›å…ˆã®ãƒ•ã‚©ãƒ«ãƒ€ãŒ `www` ã‹ã‚‰ `www/browser` ã¸ã¨å¤‰ã‚ã‚Šã¾ã—ãŸã€‚
ãã®ãŸã‚ã€Cloudflare å´ã®è¨­å®šã‚‚å¤‰æ›´ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚

![cloudflare pagesã®è¨­å®šå¤‰æ›´](./images/cloudflare-pages.png)

æœ€åˆã¯ã„ã¤å¤‰æ›´ã•ã‚ŒãŸã®ã‹æ°—ã¥ã„ã¦ã„ã¾ã›ã‚“ã§ã—ãŸãŒã€`ng update` å®Ÿè¡Œæ™‚ã®ãƒ­ã‚°ã‚’è¦‹ç›´ã™ã¨ã€ã—ã£ã‹ã‚Šè¨˜è¼‰ãŒã‚ã‚Šã¾ã—ãŸã€‚

```shell
  Application projects that are using the '@angular-devkit/build-angular' package's 'browser' and/or 'browser-esbuild' builders will be migrated to use the new 'application' builder.
  You can read more about this, including known issues and limitations, here: https://angular.dev/tools/cli/build-system-migration
    The output location of the browser build has been updated from "www" to "www/browser". You might need to adjust your deployment pipeline or, as an alternative, set outputPath.browser to "" in order to maintain the previous functionality.
    The output location of the browser build has been updated from "dist" to "dist/browser". You might need to adjust your deployment pipeline or, as an alternative, set outputPath.browser to "" in order to maintain the previous functionality.
UPDATE angular.json (6042 bytes)
UPDATE tsconfig.json (996 bytes)
  Migration completed (2 files modified).
```

ã“ã“ã¾ã§ã®æ‰‹é †ã§ã€ç„¡äº‹ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒå®Œäº†ã—ã¾ã—ãŸã€‚

## ã¾ã¨ã‚

ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆä½œæ¥­è‡ªä½“ã¯ã€å°ä¸€æ™‚é–“ã»ã©ã§å®Œäº†ã—ã¾ã—ãŸã€‚
Signal ã‚„ SSR ã¾ã‚ã‚Šã®æ©Ÿèƒ½ã¯æƒ…å ±ã¨ã—ã¦çŸ¥ã£ã¦ã¯ã„ãŸã‚‚ã®ã®ã€å®Ÿéš›ã«æ‰‹ã‚’å‹•ã‹ã—ã¦ã„ãªã„éƒ¨åˆ†ãŒå¤šãã€ãƒ“ãƒ«ãƒ‰å‘¨ã‚Šã®å¤‰æ›´ã«ã¯æ­£ç›´ãƒãƒã‚Šã¾ã—ãŸã€‚
ç‰¹ã« `ng update` ã‚³ãƒãƒ³ãƒ‰ã‚’æµã—èª­ã¿ã—ãªãŒã‚‰å®Ÿè¡Œã—ã¦ã„ãŸã›ã„ã§ã€ã„ã¤å‡ºåŠ›ãƒ•ã‚©ãƒ«ãƒ€ã« `browser` ãŒè¿½åŠ ã•ã‚ŒãŸã®ã‹æŠŠæ¡ã§ããšã€[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://angular.jp/tools/cli/build-system-migration) ã‚’æ”¹ã‚ã¦èª­ã¿ç›´ã™ãªã©ã€ä»Šå›ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§æ–°ãŸãªç™ºè¦‹ãŒã„ãã¤ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚

æœ¬æ¥ã§ã‚ã‚Œã°ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã®ä¸€ç’°ã¨ã—ã¦ SSR å¯¾å¿œã‚‚è©¦ã¿ãŸã‹ã£ãŸã®ã§ã™ãŒã€æ€ã‚ã¬ã¨ã“ã‚ã§è©°ã¾ã£ã¦ã—ã¾ã„ã€ä»Šå›ã¯ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆä½œæ¥­ã®ã¿ã§ã„ã£ãŸã‚“åŒºåˆ‡ã‚Šã¨ã—ã¾ã—ãŸã€‚
ä»Šå¾Œã¾ãŸè¨˜äº‹ã‚’æ›¸ãæ©Ÿä¼šãŒã‚ã‚Œã°ã€SSR å¯¾å¿œã«ã‚ˆã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ•°å€¤ã¸ã®å½±éŸ¿ã‚‚å«ã‚ã¦è¨˜äº‹ã«ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

ãã‚Œã§ã¯ã€è‰¯ã„ãŠå¹´ã‚’ï¼
